<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ARMY Training Camp</title>
    <style>
        /* å…¨åŸŸè¨­å®š */
        body { background: #000; color: #fff; font-family: 'Arial', sans-serif; padding: 20px; text-align: center; }
        h1 { color: #AB46D2; text-shadow: 0 0 10px #AB46D2; }
        a { color: #888; text-decoration: none; transition: color 0.3s; }
        a:hover { color: #AB46D2; }

        /* é€²åº¦æ¢å€åŸŸ */
        #army-name { 
            padding: 12px; border-radius: 5px; border: 2px solid #AB46D2; 
            background: #222; color: #fff; width: 80%; max-width: 300px;
            font-size: 16px; text-align: center; outline: none;
            margin-top: 10px;
        }
        #army-name:focus { box-shadow: 0 0 15px rgba(171, 70, 210, 0.5); }

        #progress-container { 
            width: 100%; max-width: 400px; background: #333; height: 20px; 
            border-radius: 10px; margin: 20px auto; overflow: hidden; border: 1px solid #555;
        }
        #progress-bar { width: 0%; height: 100%; background: linear-gradient(90deg, #AB46D2, #7a2c9e); transition: width 0.3s; }
        
        /* æ­Œæ›²æ¸…å–® */
        .song-list { text-align: left; max-width: 400px; margin: 0 auto; background: #111; border-radius: 10px; padding: 10px; }
        .song-item { padding: 15px; border-bottom: 1px solid #333; display: flex; align-items: center; font-size: 18px; }
        .song-item:last-child { border-bottom: none; }
        .song-item input { margin-right: 15px; transform: scale(1.5); accent-color: #AB46D2; cursor: pointer; }

        /* é ˜å–æŒ‰éˆ• */
        #btn-cert { 
            background: #444; color: #888; border: none; padding: 15px; 
            border-radius: 50px; width: 100%; max-width: 400px; 
            margin-top: 30px; font-size: 18px; transition: all 0.3s;
        }
        #btn-cert.unlocked { 
            background: linear-gradient(45deg, #AB46D2, #5a189a); 
            color: white; cursor: pointer; 
            box-shadow: 0 0 20px #AB46D2; animation: pulse 2s infinite; 
            font-weight: bold;
        }

        /* --- ç§»æ¤éä¾†çš„è­‰æ›¸ CSS --- */
        #certificate-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            display: none; /* JS æ§åˆ¶é¡¯ç¤º */
            justify-content: center;
            align-items: center;
            flex-direction: column;
            animation: fadeIn 0.5s ease-out;
            backdrop-filter: blur(5px);
        }

        .cert-card {
            background: #111;
            border: 2px solid #444;
            width: 85%;
            max-width: 350px;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            position: relative;
            box-shadow: 0 0 50px rgba(171, 70, 210, 0.3);
        }

        .stamp {
            position: absolute;
            top: 15px;
            right: 15px;
            border: 3px solid #ff0000;
            color: #ff0000;
            font-size: 14px;
            font-weight: bold;
            padding: 5px 10px;
            transform: rotate(-15deg);
            opacity: 0.8;
            letter-spacing: 2px;
        }

        .neon-text {
            color: #fff;
            text-shadow: 0 0 10px #AB46D2, 0 0 20px #AB46D2, 0 0 40px #AB46D2;
            font-family: 'Courier New', monospace; /* æ›´æœ‰æ‰“å­—æ©Ÿ/ç§‘æŠ€æ„Ÿ */
        }

        .cert-content p { font-size: 16px; margin: 5px 0; color: #ccc; }
        .cert-content strong { color: #fff; font-size: 20px; border-bottom: 1px solid #AB46D2; padding-bottom: 2px; }

        .close-btn {
            background: transparent;
            border: 1px solid #666;
            color: #888;
            padding: 10px 30px;
            border-radius: 20px;
            margin-top: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        .close-btn:hover { border-color: #AB46D2; color: #fff; background: rgba(171, 70, 210, 0.2); }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>
    <h1 style="margin-bottom: 5px;">ğŸ’œ ç‰¹è¨“ä¸­å¿ƒ</h1>
    <div style="font-size: 12px; color: #666; margin-bottom: 20px;">PROJECT BORAHAE: TRAINING GROUND</div>
    
    <a href="index.html">â† å›é¦–é  (Back)</a>
    <br><br>
    
    <input type="text" id="army-name" placeholder="è«‹è¼¸å…¥ä½ çš„æš±ç¨± (Your Name)">
    
    <div id="progress-container"><div id="progress-bar"></div></div>
    <div id="progress-text" style="color: #AB46D2; font-weight: bold;">0 / 2</div>

    <div class="song-list">
        <label class="song-item"><input type="checkbox" id="mic_drop"> 1. Mic Drop</label>
        <label class="song-item"><input type="checkbox" id="dna"> 2. DNA</label>
        </div>

    <button id="btn-cert" disabled>ğŸ”’ å®Œæˆæ‰€æœ‰è¨“ç·´ä»¥è§£é–</button>

    <div id="certificate-overlay">
        <div class="cert-card">
            <div class="stamp">TOP SECRET</div>
            <h2 style="margin: 0; color: #fff; letter-spacing: 2px;">MISSION ACCOMPLISHED</h2>
            <p style="color:#666; font-size:10px; letter-spacing: 1px; margin-top: 5px;">SPECIAL OPERATIONS: FANCHANT TRAINING</p>
            
            <div class="cert-content" style="margin-top: 20px;">
                <h1 class="neon-text" style="font-size:32px; margin:20px 0; line-height: 1.2;">Elite<br>ARMY</h1>
                <p>èŒ²è­‰æ˜</p>
                <p><strong><span id="cert-name-display">ARMY</span></strong></p>
                <p style="margin-top: 10px;">å·²å…¨æ•¸é€šéç‰¹è¨“ä¸­å¿ƒè€ƒæ ¸ã€‚</p>
                <p style="font-size:12px; color:#aaa;">(Has fully mastered the chants)</p>
                
                <p id="cert-date-display" style="font-size:12px; color:#666; margin-top:15px; font-family: monospace;"></p>
            </div>

            <div style="margin-top:25px; color:#AB46D2; font-size:12px; border-top: 1px solid #333; padding-top: 10px; width: 80%; margin-left: auto; margin-right: auto;">
                Verified by Project Borahae
            </div>
            
            <button class="close-btn" onclick="document.getElementById('certificate-overlay').style.display='none'">
                é—œé–‰ä¸¦è¿”å› (æˆªåœ–ç•™å¿µ)
            </button>
        </div>
    </div>

<script>
        // è¨­å®šæ¯é¦–æ­Œçµ±ä¸€çš„ç·´ç¿’ç›®æ¨™æ¬¡æ•¸
        const TARGET_COUNT = 3;

        const container = document.getElementById('dynamic-list');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const btnCert = document.getElementById('btn-cert');
        const nameInput = document.getElementById('army-name');

        function initTraining() {
            // ğŸ›‘ 1. æª¢æŸ¥ songLibrary æ˜¯å¦å­˜åœ¨
            if (typeof songLibrary === 'undefined') {
                container.innerHTML = "<p style='color:red'>æ‰¾ä¸åˆ° songLibraryï¼<br>è«‹ç¢ºèª songs.js å·²è¼‰å…¥ã€‚</p>";
                return;
            }

            container.innerHTML = ""; // æ¸…ç©ºå®¹å™¨
            let completedCount = 0;
            
            // ğŸ”„ 2. å°‡ç‰©ä»¶è½‰æ›ç‚ºé™£åˆ—ä¾†è·‘è¿´åœˆ
            // Object.entries æœƒæŠŠ { key: val } è½‰æˆ [key, val]
            const songEntries = Object.entries(songLibrary);
            const totalSongs = songEntries.length;

            songEntries.forEach(([id, data], index) => {
                // id å°±æ˜¯ "mic_drop" æˆ– "dna"
                // data.title å°±æ˜¯ "ğŸ¤ MIC Drop"
                
                const countKey = `${id}_count`;
                const currentCount = parseInt(localStorage.getItem(countKey) || '0');
                const isDone = currentCount >= TARGET_COUNT;

                if (isDone) completedCount++;

                // å»ºç«‹ HTML å…ƒç´ 
                const label = document.createElement('label');
                label.className = 'song-item';
                
                // Checkbox
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = isDone;
                checkbox.disabled = true; // é–å®šç‹€æ…‹

                // æ–‡å­—æè¿° (é¡¯ç¤º data.title)
                const textSpan = document.createElement('span');
                textSpan.innerText = `${index + 1}. ${data.title}`;

                // ç‹€æ…‹é¡¯ç¤º (ex: âœ… 3/3)
                const statusSpan = document.createElement('span');
                statusSpan.style.marginLeft = 'auto';
                statusSpan.style.fontSize = '12px';
                
                if (isDone) {
                    statusSpan.innerHTML = `âœ… (${currentCount}/${TARGET_COUNT})`;
                    statusSpan.style.color = '#00ff00';
                } else {
                    statusSpan.innerHTML = `ğŸ’ª (${currentCount}/${TARGET_COUNT})`;
                    statusSpan.style.color = '#888';
                }

                // çµ„è£
                label.appendChild(checkbox);
                label.appendChild(textSpan);
                label.appendChild(statusSpan);
                container.appendChild(label);
            });

            // æ›´æ–°é€²åº¦æ¢ UI
            const percent = (completedCount / totalSongs) * 100;
            progressBar.style.width = percent + "%";
            progressText.innerText = `å·²å®Œæˆ ${completedCount} / ${totalSongs}`;

            // è§£é–è­‰æ›¸é‚è¼¯
            if (completedCount === totalSongs && totalSongs > 0) {
                btnCert.disabled = false;
                btnCert.classList.add('unlocked');
                btnCert.innerHTML = "ğŸ† é ˜å–èè‹±è­‰æ›¸ <br><span style='font-size:12px'>(Claim Certificate)</span>";
            } else {
                btnCert.disabled = true;
                btnCert.classList.remove('unlocked');
                btnCert.innerText = "ğŸ”’ å®Œæˆæ‰€æœ‰è¨“ç·´ä»¥è§£é–";
            }
        }

        // è®€å–åå­—
        nameInput.value = localStorage.getItem('army_name') || "";
        nameInput.addEventListener('input', () => {
            localStorage.setItem('army_name', nameInput.value);
        });

        // å•Ÿå‹•ï¼
        initTraining();

        // è­‰æ›¸æŒ‰éˆ•äº‹ä»¶
        btnCert.addEventListener('click', () => {
            const userName = nameInput.value.trim() || "ARMY";
            const now = new Date();
            const dateStr = `${now.getFullYear()}.${String(now.getMonth()+1).padStart(2,'0')}.${String(now.getDate()).padStart(2,'0')}`;
            
            document.getElementById('cert-name-display').innerText = userName;
            document.getElementById('cert-date-display').innerText = `Date: ${dateStr}`;
            document.getElementById('certificate-overlay').style.display = 'flex';
            if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
        });
    </script>
</body>
</html>


